(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(59)},48:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(18),s=n.n(a),i=n(13),u=(n(48),n(24)),c=n(9),l=n(10),h=n(33),d=n.n(h),g=new(function(){function e(){Object(c.a)(this,e),this.user=null,this.authenticationToken=null,this.AUTHENTICATED_USER="AUTHENTICATED_USER",this.AUTH_TOKEN="AUTH_TOKEN",this.SESSION_STORAGE_ERR="Current browser does not support window.sessionStorage!"}return Object(l.a)(e,[{key:"getter",value:function(e){if("undefined"!==typeof window.sessionStorage)return window.sessionStorage.getItem(e);throw new Error(this.SESSION_STORAGE_ERR)}},{key:"setter",value:function(e,t){if("undefined"!==typeof window.sessionStorage)return window.sessionStorage.setItem(e,t),t;throw new Error(this.SESSION_STORAGE_ERR)}},{key:"wipeSession",value:function(){if("undefined"!==typeof window.sessionStorage)return window.sessionStorage.clear(),!0;throw new Error(this.SESSION_STORAGE_ERR)}},{key:"getUser",value:function(){var e=this.getter(this.AUTHENTICATED_USER);return this.authenticationUser=e&&e.trim().length>0?JSON.parse(e):null,this.authenticationUser}},{key:"getAuthToken",value:function(){var e=this.getter(this.AUTH_TOKEN);return this.authenticationToken=e&&e.trim().length>0?e:null,this.authenticationToken}},{key:"setToken",value:function(e){return this.setter(this.AUTH_TOKEN,e)}},{key:"setUser",value:function(e){return this.setter(this.AUTHENTICATED_USER,JSON.stringify(e))}}]),e}()),f={baseURL:"http://localhost:4200/api"},E=g.getAuthToken(),p=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";console.warn(" ------ API request rejected\n        URL: ".concat(e,"\n        Body: ").concat(t.body,"\n        Response: ").concat(n.status," ").concat(n.statusText,"\n        ").concat(r||n))},m=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"getResponseData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.json().then(function(e){return e||t})}},{key:"authToken",get:function(){return E=g.getAuthToken()},set:function(e){E=g.setToken(e)}}]),e}();m.get=function(e){return m.go(e,{method:"get"})},m.post=function(e,t){return m.go(e,{method:"post",body:t})},m.put=function(e,t){return m.go(e,{method:"put",body:t})},m.patch=function(e,t){return m.go(e,{method:"patch",body:t})},m.delete=function(e){return m.go(e,{method:"delete"})},m.go=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Headers({Accept:"application/json"});void 0!==t.body&&(t.body.login&&t.body.password&&(E="Basic ".concat(btoa("".concat(t.body.login,":").concat(t.body.password))),t.body.login=null,t.body.password=null),n.set("Content-Type","application/json"),t.body=JSON.stringify(t.body)),E&&n.set("Authorization",E),t.headers=n;var r="".concat(m.env.baseURL).concat(e);return new Promise(function(e,n){d()(r,t).then(function(o){o.ok&&"2"===String(o.status).charAt()?e(o):function(e,t,n,r){n.json().then(function(o){console.log(o),p(e,t,n,o),r(o)},function(){p(e,t,n),r(new Error(n))})}(r,t,o,n)},function(e){!function(e,t,n){console.warn(" ------ API request failed\n        URL: ".concat(e,"\n        Body: ").concat(t.body,"\n        Error: ").concat(n))}(r,t,e),n(new Error(e))})})},m.env=Object(u.a)({},f);var O=m,w=function(e){var t=e.headers.get("Authorization");return console.log(e,"AUTH"),t&&(O.authToken=t),O.getResponseData(e)},U=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"delete",value:function(){return O.authToken=null,O.delete(this.URL)}},{key:"emailLogin",value:function(t,n){var r={email:t,password:n};return O.post(e.URL,r).then(w).catch(function(e){return e})}},{key:"logout",value:function(){O.authToken=null}},{key:"resetPassword",value:function(e){var t={email:e};return O.post(this.PASSWORD_RECOVERY_URL,t)}}]),e}();U.URL="/users/login",U.SIGNUP_URL="/sessions/email",U.PASSWORD_RECOVERY_URL="/sessions/email/password-recovery";var S=new U,v=function(e){return{type:"USER_LOGIN_FAILURE",errorMessage:JSON.stringify(e.errors)}},b=function(e,t){return function(n){return n({type:"USER_LOGIN",sendAuthRequest:!0}),S.emailLogin(e,t).then(function(e){return console.log(e),e.success?n(function(e){return{type:"USER_LOGIN_SUCCESS",isLoggedIn:!0,user:e.user}}(e)):n(v(e))}).catch(function(e){return n(v(e))})}},y=n(23),R=n(20),T=n(25),k=n(12),A=n(22),_=n(67),L=n(60),j=n(61),I=n(62),N=n(63),C=n(64),G=n(65),H=n(66),M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(y.a)(this,Object(R.a)(t).call(this,e))).authenticateUser=function(){var e=n.props.authenticateUser,t=n.state;return e(t.email,t.password)},n.state={email:"",password:""},n}return Object(T.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isLoggedIn,r=t.errorMessage,a=this.state,s=a.email,i=a.password;return n?o.a.createElement(k.a,{to:"/home"}):o.a.createElement("div",{className:"form-signin-wrapper"},o.a.createElement(L.a,null,o.a.createElement(j.a,{sm:{size:6,push:2,pull:2,offset:1}},o.a.createElement(I.a,null,r?o.a.createElement("div",{style:{color:"red"}},r," "):null,o.a.createElement(N.a,null,o.a.createElement(C.a,{for:"Email"},"Email"),o.a.createElement(G.a,{value:s,type:"email",placeholder:"Enter Email",onChange:function(t){return e.setState({email:t.target.value})}})),o.a.createElement(N.a,null,o.a.createElement(C.a,{for:"Password"},"Password"),o.a.createElement(G.a,{value:i,type:"password",placeholder:"Enter Password",onChange:function(t){return e.setState({password:t.target.value})}}))),o.a.createElement(H.a,{color:"primary",onClick:this.authenticateUser},"Signin"))))}}]),t}(r.Component),P=Object(i.b)(function(e){return{isLoggedIn:e.session.isLoggedIn,currentUser:e.session.currentUser,errorMessage:e.session.errorMessage}},function(e){return{authenticateUser:function(t,n){return e(b(t,n))}}})(M),D=function(){return o.a.createElement("div",{className:"page-content-wrapper"},o.a.createElement("h2",null,"You seem to be lost. Go"," ",o.a.createElement(A.b,{to:"/home"},"Home")))},q=[{title:"Home",route:"/home",component:function(){return o.a.createElement("div",{className:"page-content-wrapper"},o.a.createElement("h2",null,"This is Home screen"))},exact:!0,mainMenu:!0}],x=function(e){function t(){return Object(c.a)(this,t),Object(y.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(l.a)(t,[{key:"checkAuth",value:function(e){var t=this.props.isLoggedIn;return function(n){return t?o.a.createElement(e,n):o.a.createElement(k.a,{to:{pathname:"/login",state:{from:n.location}}})}}},{key:"renderRoutes",value:function(){var e=this;return o.a.createElement("div",{style:{paddingTop:20}},o.a.createElement(k.d,null,o.a.createElement(k.b,{style:{paddingTop:20},path:"/login",component:P}),q.map(function(t){return o.a.createElement(k.b,{path:t.route,key:t.route,exact:t.exact,render:e.checkAuth(t.component)})}),o.a.createElement(k.b,{exact:!0,path:"*",component:D})))}},{key:"render",value:function(){return o.a.createElement(A.a,null,o.a.createElement(_.a,null,this.renderRoutes()))}}]),t}(r.Component),J=Object(i.b)(function(e){return{isLoggedIn:e.session.isLoggedIn,currentUser:e.session.currentUser}},function(e,t){return{authenticateUser:function(){return e(b(t))}}})(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B,K=n(14),W=n(36),z=(n(55),n(37)),F={sendAuthRequest:!1,isLoggedIn:!!g.getAuthToken(),currentUser:g.getUser(),errorMessage:null},Y={session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_SUCCESS":return Object.assign({},e,{isLoggedIn:!0,currentUser:t.user,errorMessage:null});case"USER_LOGIN":return Object.assign({},e,{sendAuthRequest:!0});case"USER_LOGIN_FAILURE":return Object.assign({},e,{isLoggedIn:!1,errorMessage:t.errorMessage,currentUser:null});case"USER_LOGOUT":return Object.assign({},e,{sendAuthRequest:!0});case"USER_LOGOUT_SUCCESS":return Object.assign({},e,{isLoggedIn:!1,currentUser:null,errorMessage:null});case"USER_LOGOUT_FAILURE":return Object.assign({},e,{errorMessage:t.errorMessage});default:return e}}};B=Object(K.a)(W.a);var V=Object(K.d)(Object(K.c)(Object(u.a)({},Y,{routerReducer:z.routerReducer})),B);n(58);s.a.render(o.a.createElement(i.a,{store:V},o.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.7061214b.chunk.js.map